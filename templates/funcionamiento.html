{% extends "base.html" %}
{% block title %}Funcionamiento del Sistema{% endblock %}

{% block head %}
  {{ super() }}
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/funcionamiento.css') }}"
  />
{% endblock %}

{% block content %}
<section class="page-header">
  <h1>üìò Funcionamiento y ejecuci√≥n del sistema</h1>
  <p>
    Descripci√≥n del flujo de an√°lisis, procesamiento y visualizaci√≥n del
    analizador autom√°tico de registros de seguridad.
  </p>
</section>

<section class="card">
  <h2>üîé Visi√≥n general</h2>
  <p>
    El sistema ha sido dise√±ado para analizar autom√°ticamente archivos de log de
    seguridad, procesando grandes vol√∫menes de informaci√≥n y transform√°ndolos en
    m√©tricas claras y accionables.
  </p>
  <p>
    El objetivo principal es facilitar la detecci√≥n de actividad sospechosa sin
    necesidad de revisar manualmente los registros, manteniendo una arquitectura
    modular y escalable.
  </p>
</section>

<section class="card">
  <h2>üîÑ Flujo general del sistema</h2>
  <p>
    El funcionamiento del sistema sigue un flujo claramente definido:
  </p>

  <ul class="list">
    <li><strong>Carga del archivo de log</strong></li>
    <li><strong>Detecci√≥n autom√°tica del tipo de log</strong></li>
    <li><strong>Parseo y filtrado de eventos relevantes</strong></li>
    <li><strong>An√°lisis y clasificaci√≥n de actividad sospechosa</strong></li>
    <li><strong>Visualizaci√≥n y exportaci√≥n de resultados</strong></li>
  </ul>

  <p>
    Esta separaci√≥n permite desacoplar el an√°lisis del sistema de la
    visualizaci√≥n, mejorando la mantenibilidad y evitando dependencias
    innecesarias.
  </p>
</section>

<section class="card">
  <h2>üì• Carga de archivos de log</h2>
  <p>
    El usuario puede cargar archivos de log directamente desde la interfaz web.
    El archivo seleccionado se establece como <strong>log activo</strong> y es
    utilizado por todas las vistas del sistema.
  </p>
  <p>
    Se admiten logs de sistemas Linux, OpenSSH y formatos similares. En caso de
    que el archivo no sea reconocido, el sistema informa expl√≠citamente al
    usuario y adapta la visualizaci√≥n para evitar interpretaciones incorrectas.
  </p>
</section>

<section class="card">
  <h2>üß© Detecci√≥n del tipo de log</h2>
  <p>
    Tras la carga del archivo, el sistema detecta autom√°ticamente el tipo de log
    analizado:
  </p>

  <ul class="list">
    <li><strong>auth</strong>: logs de autenticaci√≥n (Linux / OpenSSH)</li>
    <li><strong>network</strong>: logs de tr√°fico de red (Zeek / conn.log)</li>
    <li><strong>unknown</strong>: formato no reconocido</li>
  </ul>

  <p>
    Esta clasificaci√≥n gobierna tanto el an√°lisis como el comportamiento visual
    del dashboard.
  </p>
</section>

<section class="card">
  <h2>üß™ Parseo y filtrado de eventos</h2>
  <p>
    El sistema aplica t√©cnicas de <strong>log parsing</strong> mediante
    expresiones regulares para extraer √∫nicamente los eventos relevantes desde el
    punto de vista de la seguridad.
  </p>
  <p>
    Las l√≠neas que no corresponden a eventos de inter√©s se consideran
    <em>ruido</em> y se descartan intencionadamente, simulando el comportamiento
    real de un entorno de producci√≥n.
  </p>
</section>

<section class="card">
  <h2>üìä An√°lisis y clasificaci√≥n</h2>
  <p>
    A partir de los eventos parseados, el sistema realiza un an√°lisis que incluye:
  </p>

  <ul class="list">
    <li>Agrupaci√≥n por direcci√≥n IP y usuario</li>
    <li>C√°lculo del n√∫mero de intentos detectados</li>
    <li>Clasificaci√≥n de gravedad seg√∫n umbrales definidos</li>
    <li>Enriquecimiento opcional mediante informaci√≥n geogr√°fica</li>
  </ul>

  <p>
    El resultado del an√°lisis se transforma en estructuras de datos listas para
    su visualizaci√≥n o exportaci√≥n.
  </p>
</section>

<section class="card">
  <h2>üñ•Ô∏è Visualizaci√≥n de resultados</h2>
  <p>
    El dashboard act√∫a como capa de interpretaci√≥n del sistema. No realiza
    an√°lisis directo, sino que consume los datos ya procesados.
  </p>
  <p>
    La interfaz se adapta din√°micamente al tipo de log cargado, mostrando
    √∫nicamente las m√©tricas y gr√°ficas que aplican en cada caso.
  </p>
</section>

<section class="card">
  <h2>‚¨áÔ∏è Exportaci√≥n de inteligencia</h2>
  <p>
    El sistema contempla la exportaci√≥n de los resultados del an√°lisis en formatos
    estructurados como CSV y JSON.
  </p>
  <p>
    Esta funcionalidad est√° orientada a la generaci√≥n de inteligencia accionable,
    permitiendo la integraci√≥n con sistemas externos como firewalls, IDS/IPS o
    herramientas SIEM.
  </p>
</section>

<section class="card">
  <h2>‚ö†Ô∏è Limitaciones actuales</h2>
  <ul class="list">
    <li>Algunos logs no incluyen informaci√≥n temporal completa.</li>
    <li>La exportaci√≥n completa se plantea como fase posterior.</li>
    <li>El procesamiento en tiempo real no est√° implementado en esta versi√≥n.</li>
  </ul>
</section>

<section class="card">
  <h2>üöÄ Evoluci√≥n futura</h2>
  <ul class="list">
    <li>Normalizaci√≥n completa de fechas y filtros temporales avanzados.</li>
    <li>Procesamiento de logs en tiempo real.</li>
    <li>Integraci√≥n con sistemas de mensajer√≠a y alertas.</li>
    <li>Uso de tecnolog√≠as como Kafka para streaming de eventos.</li>
  </ul>
</section>

<section class="card">
  <h2>üß™ Simulaci√≥n controlada de ataques</h2>
  <p>
  La simulaci√≥n no realiza an√°lisis directo sobre los datos generados. 
  Su funci√≥n es crear un archivo de log con eventos de ataque realistas,
  que posteriormente puede ser cargado y analizado mediante el mismo
  flujo que cualquier archivo real.
  </p>
  <p>
  Este enfoque garantiza que las m√©tricas, clasificaciones y visualizaciones
  mostradas en el dashboard no dependan de l√≥gica especial para la simulaci√≥n,
  sino del propio motor de an√°lisis del sistema.
  </p>

</section>
<section class="card">
  <h2>üì° Sistema interno de telemetr√≠a</h2>

  <p>
    Adem√°s del an√°lisis de archivos de log externos, el sistema incorpora un
    m√≥dulo interno de monitorizaci√≥n de accesos a la propia aplicaci√≥n web.
  </p>

  <p>
    Este m√≥dulo registra autom√°ticamente informaci√≥n relevante de cada
    petici√≥n HTTP, incluyendo:
  </p>

  <ul class="list">
    <li>Direcci√≥n IP de origen</li>
    <li>Endpoint solicitado</li>
    <li>M√©todo HTTP utilizado</li>
    <li>C√≥digo de estado devuelto</li>
    <li>Identificaci√≥n de inicio de sesi√≥n (sesi√≥n real)</li>
  </ul>

  <p>
    La telemetr√≠a se divide en dos niveles:
  </p>

  <ul class="list">
    <li>
      <strong>Vista p√∫blica:</strong> m√©tricas agregadas de uso, como
      sesiones reales, p√°ginas vistas y actividad de los √∫ltimos 7 d√≠as.
    </li>
    <li>
      <strong>Vista administrativa:</strong> monitorizaci√≥n avanzada que
      incluye Top IPs, detecci√≥n de errores 404 y sistema b√°sico de
      identificaci√≥n de comportamiento an√≥malo.
    </li>
  </ul>

  <p>
    El sistema implementa una ventana temporal de an√°lisis de 5 minutos para
    detectar IPs con actividad excesiva, marcando autom√°ticamente posibles
    comportamientos sospechosos.
  </p>

  <p>
    Este enfoque simula el comportamiento de herramientas de monitorizaci√≥n
    empleadas en entornos reales de seguridad, reforzando el car√°cter
    pr√°ctico y profesional del proyecto.
  </p>
  <p>
  La separaci√≥n entre telemetr√≠a interna y an√°lisis de logs externos
  garantiza una arquitectura desacoplada y mantenible.
</p>

</section>



<section class="card">
  <h2>‚ùì Dudas o consultas</h2>
  <p>
    Si tienes alguna duda sobre el funcionamiento del sistema o el an√°lisis
    realizado, puedes enviar una consulta.
  </p>

  <form method="post">
    <label>Correo electr√≥nico</label>
    <input type="email" name="email" required />

    <label>Mensaje</label>
    <textarea name="mensaje" rows="4" required></textarea>

    <button disabled>Enviar consulta</button>
  </form>

  <p class="hint">
    ‚ö†Ô∏è La gesti√≥n de consultas ser√° habilitada en una fase posterior del
    proyecto.
  </p>
</section>


{% endblock %}
